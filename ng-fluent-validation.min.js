(function(){"use strict";function t(){function n(n){return n&&{}.toString.call(n)==="[object Function]"}function r(n){return n==undefined||n==null||n.length==0}function u(n){return n==undefined||n==null||n==""}function f(){function o(n,t){var i,r;if(n==null||n==undefined)return!0;if(i=t.validate(n),!i.isValid)for(r=0;r<i.errors.length;r++)f.push(i.errors[r]);return i.isValid}var e=[],f=[];this.ruleFor=function(f){var l,h,s,c;return n(f)?(l=f,s=i.match(f.toString(),"return\\s([a-zA-Z_$][a-zA-Z0-9_$]*\\.?)+"),s&&(s=s.replace("return ","").trim()),s.indexOf(".")!=-1&&(s=s.substring(s.indexOf(".")+1)),h=s):(h=f,l=function(n){return n[f]}),c={propSelector:l,propName:h},e.push(c),{must:function(n){return c.validator=n,{withMessage:function(n){c.message=h?n.replace("{propertyName}",h):n}}},setValidator:function(n){return this.must(function(t,i){return o(i,n)})},setCollectionValidator:function(n){return this.must(function(i,u){return r(u)?!0:t.From(u).Count(function(t){return!o(t,n)})==0})},notNull:function(){var n=this.must(function(n,t){return t!=undefined&&t!=null});return n.withMessage("'{propertyName}' must not be null."),n},notEmpty:function(){var n=this.must(function(n,t){return t==undefined||t==null?!1:angular.isNumber(t)?t!=0:angular.isArray(t)?t.length>0:t.trim()!=""});return n.withMessage("'{propertyName}' must not be empty."),n},notEqual:function(t){var i=this.must(function(i,r){var u=t;return n(t)&&(u=t(i)),r!==u});return n(t)||i.withMessage("'{propertyName}' must not be equal to '"+t+"'."),i},equal:function(t){var i=this.must(function(i,r){var u=t;return n(t)&&(u=t(i)),r===u});return n(t)||i.withMessage("'{propertyName}' must be equal to '"+t+"'."),i},length:function(n,t){var i=this.must(function(i,r){var f=t||(r||"").length;return!u(r)&&r.length>=n&&r.length<=f});return t==undefined?i.withMessage("'{propertyName}' must be at least "+n+" characters."):i.withMessage("'{propertyName}' must be between"+n+" and "+t+" characters."),i},lessThan:function(t){var i=this.must(function(i,r){var u=t;return n(t)&&(u=t(i)),r<u});return n(t)||i.withMessage("'{propertyName}' must be less than '"+t+"'."),i},lessThanOrEqual:function(t){var i=this.must(function(i,r){var u=t;return n(t)&&(u=t(i)),r<=u});return n(t)||i.withMessage("'{propertyName}' must be less than or equal to '"+t+"'."),i},greaterThan:function(t){var i=this.must(function(i,r){var u=t;return n(t)&&(u=t(i)),r>u});return n(t)||i.withMessage("'{propertyName}' must be greater than '"+t+"'."),i},greaterThanOrEqual:function(t){var i=this.must(function(i,r){var u=t;return n(t)&&(u=t(i)),r>=u});return n(t)||i.withMessage("'{propertyName}' must be greater than or equal to '"+t+"'."),i},matches:function(n,t){var r=this.must(function(r,u){return u==undefined||u==null||i.isMatch(u,n,t)});return r.withMessage("'{propertyName}' is not in the correct format."),r},emailAddress:function(){var t="^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$",n=this.must(function(n,r){return r!=undefined&&r!=null&&i.isMatch(r,t,"i")});return n.withMessage("'{propertyName}' is not a valid email address."),n}}};this.isValid=function(n){return this.validate(n).isValid};this.validate=function(n){f=[];var u=t.From(e).Where(function(t){var i=t.propSelector(n);return!t.validator(n,i)}).Select(function(n){return{errorMessage:n.message,propertyName:n.propName}}).ToArray(),o=r(u),i={$all:f};return angular.forEach(u,function(n){var t,u,r;if(f.push(n),n.propertyName.indexOf(".")<0)i[n.propertyName]==undefined&&(i[n.propertyName]=[]),i[n.propertyName].push(n.errorMessage);else for(t=n.propertyName.split("."),i[t[0]]==undefined&&(i[t[0]]={}),u=i[t[0]],r=1;r<t.length;r++)u[t[r]]==undefined&&r+1!=t.length&&(u[t[r]]={}),r+1==t.length&&(u[t[r]]==undefined&&(u[t[r]]=[]),u[t[r]].push(n.errorMessage)),u=u[t[r]]}),n.$errors=i,n.$isValid=o,{errors:u,isValid:o}}}var i=function(){var n=function(n,t,i){var r=new RegExp(t,i);return r.test(n)},t=function(n,t,i){var u=new RegExp(t,i),r=u.exec(n);if(r!=undefined&&r!=null)return r[0]};return{isMatch:n,match:t}}(),t={From:function(n){var i=function(i){var r=[];return angular.forEach(n,function(n,t){i(n,t)&&r.push(n)}),t.From(r)},r=function(i){var r=[];return angular.forEach(n,function(n){r.push(i(n))}),t.From(r)},u=function(t){if(t==undefined)return n.length;var i=0;return angular.forEach(n,function(n,r){t(n,r)&&i++}),i},f=function(){return n};return{Where:i,Select:r,Count:u,ToArray:f}}};return f}function i(n){function r(t,r,u,f,e){var o=i(t,r,u);return f!=undefined&&(o.prototype.$validate=function(){return f.validate(this)}),e!=undefined&&(o.$getOrCreate=function(t){var r=n.defer(),i=new e,u=parseInt(t);return u&&angular.isNumber(u)?i=o.get({id:t}):(i=new o(i),i.$promise=r.promise),r.resolve(),i}),o}var t=angular.injector(["ngResource"]),i=t.get("$resource");return r}function r(n){return{restrict:"A",scope:{},link:function(t,i,r){t.$$errorMessage=function(){var n=t.$parent.$eval(r.ngValidationResult);if(n)return i.addClass("has-error"),n.join("\n");i.removeClass("has-error")};var u=angular.element('<span class="validation-control-field"><\/span>'),e=n(angular.element('<i class="glyphicon glyphicon-warning-sign validation-sign" popover="{{ $$errorMessage() }}" popover-placement="bottom" popover-animation="false" popover-trigger="mouseenter"><\/i>'))(t),f=i.find(".control-field");f.before(u);u.append(e);u.append(f)}}}var n=angular.module("ngFluentValidation",[]);n.factory("validator",[t]);n.factory("$resource",["$q",i]);n.directive("ngValidationResult",["$compile",r])})();
/*
//# sourceMappingURL=ng-fluent-validation.min.js.map
*/